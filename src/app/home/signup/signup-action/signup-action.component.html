<app-header></app-header>
<mat-horizontal-stepper [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
        <form [formGroup]="firstFormGroup">
            <ng-template matStepLabel> Fill out your name and address</ng-template>
            <div style="text-align: center;">
                <div>
                    <img src="./../../../../assets/undraw_Building_re_xfcm.png" alt="Business" width="300" />
                </div>
                <div style="display:flex;justify-content: center; flex-direction: column;align-items:center;">
                    <mat-form-field appearance="outline" style="width: 350px; max-width: 500px;">
                        <mat-label> Enter Name of Organization/Business</mat-label>
                        <input matInput formControlName="name" placeholder="Name of Organization" [type]="'phone'"
                            #name required>
                        <mat-icon matSuffix>apartment</mat-icon>
                        <mat-hint *ngIf="nameInput.errors"> Required </mat-hint>

                    </mat-form-field>
                    <mat-form-field appearance="outline" style="width: 350px; max-width: 500px;">
                        <mat-label> Telephone 1 </mat-label>
                        <input matInput formControlName="phoneNumberInput1" placeholder="1xxxxxxxxxx" [type]="'text'"
                            #phone1 required>
                        <mat-icon matSuffix>phone</mat-icon>
                        <mat-hint *ngIf="phoneNumberInput1.errors?.pattern"> Invalid Phone Number </mat-hint>
                    </mat-form-field>
                    <mat-form-field appearance="outline" style="width: 350px; max-width: 500px;">
                        <mat-label> Telephone 2 </mat-label>
                        <input matInput formControlName="phoneNumberInput2" placeholder="1xxxxxxxxxx" [type]="'text'"
                            #phone2 required>
                        <mat-icon matSuffix>phone</mat-icon>
                        <mat-hint *ngIf="phoneNumberInput2.errors?.pattern"> Invalid Phone Number </mat-hint>
                    </mat-form-field>
                    <mat-form-field appearance="outline" style="width: 350px; max-width: 500px;">
                        <mat-label> Address Line 1 </mat-label>
                        <input matInput formControlName="addressInput1" placeholder="Address Line 1" [type]="'text'"
                            #address1 required>
                        <mat-icon matSuffix>apartment</mat-icon>
                        <mat-hint *ngIf="addressInput1.errors?.required"> Required </mat-hint>
                    </mat-form-field>
                    <mat-form-field appearance="outline" style="width: 350px; max-width: 500px;">
                        <mat-label> Address Line 2 </mat-label>
                        <input matInput formControlName="addressInput2" placeholder="Address Line 2" [type]="'text'"
                            #address2 required>
                        <mat-icon matSuffix>apartment</mat-icon>
                        <mat-hint *ngIf="addressInput2.errors?.required"> Required </mat-hint>
                    </mat-form-field>
                    
                </div>
                <div class="container">
                    <button mat-raised-button color="primary" matStepperNext>Next</button>
                </div>
            </div>

        </form>
    </mat-step>
    <mat-step>
        <form>
            <ng-template matStepLabel> Chose A Plan </ng-template>

            <div>

                <div id="price-packages" style="display:flex;justify-content: center;">

                    <div *ngFor="let plan of pricePackages" id="price-package"
                        style="border: 1px solid #007bff; padding: 30px;border-radius: 10px; margin-left: 10px; margin-right: 10px; width: 250px; ">
                        <div>
                            <img src="./../../../../assets/signup/undraw_product_tour_foyt.png" alt="Business"
                                width="250" />
                        </div>
                        <h1 style="color: #007bff;"> {{ plan.package_name }}</h1>
                        <div style="padding: 10px;">
                            <span>
                                <p> Add Up to {{plan.user_limit }} Users </p>
                            </span>
                            <span>
                                <p> Create and manage to up {{plan.workspace_limit }} Workspaces</p>
                            </span>
                            <span>
                                <p> Pay $ {{plan.price_per_gigabyte }} / Gigabyte </p>
                            </span>
                        </div>
                        <h1> $ {{ plan.package_price }} USD / Month</h1>
                        <br />
                        <button mat-raised-button color="primary" (click)="selectPackage(plan,stepper)"> Select This
                            Plan </button>
                    </div>

                </div>

            </div>

        </form>
    </mat-step>
    <mat-step>
        <ng-template matStepLabel>Done</ng-template>
        <div style="display: flex;justify-content: center;">
            <div id="price-package" *ngIf="selectedPackage"
                style="border: 1px solid #007bff; padding: 30px;border-radius: 10px; margin-left: 10px; margin-right: 10px; width: 250px; ">
                <div>
                    <img src="./../../../../assets/signup/undraw_product_tour_foyt.png" alt="Business" width="250" />
                </div>
                <h1 style="color: #007bff;"> Selected: {{ selectedPackage.package_name }}</h1>
                <div style="padding: 10px;">
                    <span>
                        <p> Add Up to {{selectedPackage.user_limit }} Users </p>
                    </span>
                    <span>
                        <p> Create and manage to up {{selectedPackage.workspace_limit }} Workspaces</p>
                    </span>
                    <span>
                        <p> Pay $ {{selectedPackage.price_per_gigabyte }} / Gigabyte </p>
                    </span>
                </div>
                <h1> $ {{ selectedPackage.package_price }} USD / Month</h1>
                <br/>
                <mat-hint> Note: An invoice will be sent to you a week before the month ends. The invoice must be paid via a wire transfer.</mat-hint>
            </div>
        </div>
        <div class="container">
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-raised-button color="primary" (click)="createOrganization(name.value,phone1.value,phone2.value,address1.value,address2.value)"> Create
                    Organization </button>
            </div>
        </div>
    </mat-step>
</mat-horizontal-stepper>